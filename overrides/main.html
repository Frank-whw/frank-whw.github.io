{% extends "base.html" %}

{#
  Main layout override for MkDocs Material.
  Goals:
  - Keep original functionality (title handling, sidebars, optional counter CSS)
  - Improve semantics using HTML5 elements
  - Maintain responsive behavior and compatibility with existing partials
 #}

{% block htmltitle %}
  {% if page.meta and page.meta.home %}
    <title>{{ config.site_name }}</title>
  {% else %}
    {{ super() }}
  {% endif %}
{% endblock %}

{% block styles %}
  {{ super() }}
  {# Conditionally include page counter styles #}
  {% if page.meta and page.meta.counter %}
    <link rel="stylesheet" href="{{ 'css/counter.css' | url }}">
  {% endif %}
{% endblock %}

{% block site_nav %}
  {# Primary navigation sidebar #}
  {% if nav %}
    <aside class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
          {% if not (page.meta and page.meta.hide and 'navigation' in page.meta.hide) %}
            {% include "partials/nav.html" %}
          {% endif %}
        </div>
      </div>
    </aside>
  {% endif %}

  {# Secondary TOC sidebar #}
  {% if page.toc and "toc.integrate" not in features %}
    <aside class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
          {% if not (page.meta and page.meta.hide and 'toc' in page.meta.hide) %}
            {% include "partials/toc.html" %}
          {% endif %}
        </div>
      </div>
    </aside>
    <link rel="stylesheet" href="{{ 'css/fold_toc.css' | url }}">
  {% endif %}
{% endblock %}
